-- --------------------------------------------------------
-- Host:                         127.0.0.1
-- Versione server:              10.3.14-MariaDB - mariadb.org binary distribution
-- S.O. server:                  Win64
-- HeidiSQL Versione:            10.2.0.5599
-- --------------------------------------------------------

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET NAMES utf8 */;
/*!50503 SET NAMES utf8mb4 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;


-- Dump della struttura del database turni_infermieri
CREATE DATABASE IF NOT EXISTS `turni_infermieri` /*!40100 DEFAULT CHARACTER SET utf8 COLLATE utf8_bin */;
USE `turni_infermieri`;

-- Dump della struttura di tabella turni_infermieri.ferie
CREATE TABLE IF NOT EXISTS `ferie` (
  `id_ferie` int(11) NOT NULL AUTO_INCREMENT,
  `id_infermiere` int(11) NOT NULL,
  `data` date NOT NULL,
  PRIMARY KEY (`id_ferie`),
  UNIQUE KEY `id_infermiere_data` (`id_infermiere`,`data`),
  KEY `FK_ferie_infermiere` (`id_infermiere`),
  CONSTRAINT `FK_ferie_infermiere` FOREIGN KEY (`id_infermiere`) REFERENCES `infermiere` (`id_infermiere`)
) ENGINE=InnoDB AUTO_INCREMENT=353 DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='vengono riportate tutte le preferenze di giorni di ferie di tutti gli infermieri';

-- Dump dei dati della tabella turni_infermieri.ferie: ~224 rows (circa)
DELETE FROM `ferie`;
/*!40000 ALTER TABLE `ferie` DISABLE KEYS */;
INSERT INTO `ferie` (`id_ferie`, `id_infermiere`, `data`) VALUES
	(1, 1, '2019-09-01'),
	(2, 1, '2019-09-02'),
	(3, 1, '2019-09-03'),
	(4, 1, '2019-09-04'),
	(5, 1, '2019-09-05'),
	(6, 1, '2019-10-14'),
	(7, 1, '2019-10-15'),
	(8, 1, '2019-10-16'),
	(9, 1, '2019-10-17'),
	(10, 1, '2019-10-18'),
	(11, 1, '2019-11-23'),
	(12, 1, '2019-11-24'),
	(13, 1, '2019-11-25'),
	(14, 1, '2019-11-26'),
	(15, 1, '2019-12-23'),
	(16, 1, '2019-12-24'),
	(17, 1, '2020-01-25'),
	(18, 1, '2020-01-26'),
	(19, 1, '2020-02-04'),
	(20, 1, '2020-02-28'),
	(21, 1, '2020-03-09'),
	(22, 1, '2020-03-24'),
	(23, 1, '2020-04-10'),
	(24, 1, '2020-04-26'),
	(25, 1, '2020-05-14'),
	(26, 1, '2020-05-28'),
	(27, 1, '2020-06-02'),
	(28, 1, '2020-06-24'),
	(29, 1, '2020-07-15'),
	(30, 1, '2020-07-26'),
	(31, 1, '2020-08-19'),
	(32, 1, '2020-08-26'),
	(33, 2, '2019-09-08'),
	(34, 2, '2019-09-09'),
	(35, 2, '2019-09-10'),
	(36, 2, '2019-09-11'),
	(37, 2, '2019-09-12'),
	(38, 2, '2019-10-20'),
	(39, 2, '2019-10-21'),
	(40, 2, '2019-10-22'),
	(41, 2, '2019-10-23'),
	(42, 2, '2019-10-24'),
	(43, 2, '2019-11-13'),
	(44, 2, '2019-11-14'),
	(45, 2, '2019-11-15'),
	(46, 2, '2019-11-16'),
	(47, 2, '2019-12-12'),
	(48, 2, '2019-12-16'),
	(49, 2, '2020-01-10'),
	(50, 2, '2020-01-19'),
	(51, 2, '2020-02-02'),
	(52, 2, '2020-02-20'),
	(53, 2, '2020-03-03'),
	(54, 2, '2020-03-07'),
	(55, 2, '2020-04-13'),
	(56, 2, '2020-04-23'),
	(57, 2, '2020-05-15'),
	(58, 2, '2020-05-25'),
	(59, 2, '2020-06-11'),
	(60, 2, '2020-06-27'),
	(61, 2, '2020-07-07'),
	(62, 2, '2020-07-17'),
	(63, 2, '2020-08-09'),
	(64, 2, '2020-08-22'),
	(65, 3, '2019-09-25'),
	(66, 3, '2019-09-26'),
	(67, 3, '2019-09-27'),
	(68, 3, '2019-09-28'),
	(69, 3, '2019-09-29'),
	(70, 3, '2019-10-03'),
	(71, 3, '2019-10-04'),
	(72, 3, '2019-10-05'),
	(73, 3, '2019-10-06'),
	(74, 3, '2019-10-07'),
	(75, 3, '2019-11-17'),
	(76, 3, '2019-11-18'),
	(77, 3, '2019-11-19'),
	(78, 3, '2019-11-20'),
	(79, 3, '2019-12-01'),
	(80, 3, '2019-12-11'),
	(81, 3, '2020-01-07'),
	(82, 3, '2020-01-14'),
	(83, 3, '2020-02-22'),
	(84, 3, '2020-02-25'),
	(85, 3, '2020-03-07'),
	(86, 3, '2020-03-13'),
	(87, 3, '2020-04-15'),
	(88, 3, '2020-04-20'),
	(89, 3, '2020-05-10'),
	(90, 3, '2020-05-29'),
	(91, 3, '2020-06-17'),
	(92, 3, '2020-06-30'),
	(93, 3, '2020-07-01'),
	(94, 3, '2020-07-30'),
	(95, 3, '2020-08-08'),
	(96, 3, '2020-08-28'),
	(97, 4, '2019-09-25'),
	(98, 4, '2019-09-26'),
	(99, 4, '2019-10-27'),
	(100, 4, '2019-10-28'),
	(102, 4, '2019-11-03'),
	(101, 4, '2019-11-29'),
	(103, 4, '2019-12-04'),
	(104, 4, '2019-12-05'),
	(105, 4, '2019-12-06'),
	(106, 4, '2019-12-07'),
	(107, 4, '2019-12-08'),
	(108, 4, '2020-01-18'),
	(109, 4, '2020-01-19'),
	(110, 4, '2020-01-20'),
	(111, 4, '2020-01-21'),
	(112, 4, '2020-01-22'),
	(113, 4, '2020-02-07'),
	(114, 4, '2020-02-08'),
	(115, 4, '2020-02-09'),
	(116, 4, '2020-02-10'),
	(117, 4, '2020-03-07'),
	(118, 4, '2020-03-13'),
	(119, 4, '2020-04-15'),
	(120, 4, '2020-04-20'),
	(121, 4, '2020-05-10'),
	(122, 4, '2020-05-29'),
	(123, 4, '2020-06-17'),
	(124, 4, '2020-06-30'),
	(125, 4, '2020-07-01'),
	(126, 4, '2020-07-30'),
	(127, 4, '2020-08-08'),
	(128, 4, '2020-08-28'),
	(129, 5, '2019-09-12'),
	(130, 5, '2019-09-17'),
	(131, 5, '2019-10-17'),
	(132, 5, '2019-10-21'),
	(133, 5, '2019-11-03'),
	(134, 5, '2019-11-10'),
	(135, 5, '2019-12-10'),
	(136, 5, '2019-12-11'),
	(137, 5, '2019-12-12'),
	(138, 5, '2019-12-13'),
	(139, 5, '2019-12-14'),
	(140, 5, '2020-01-05'),
	(141, 5, '2020-01-06'),
	(142, 5, '2020-01-07'),
	(143, 5, '2020-01-08'),
	(144, 5, '2020-01-09'),
	(145, 5, '2020-02-17'),
	(146, 5, '2020-02-18'),
	(147, 5, '2020-02-19'),
	(148, 5, '2020-02-20'),
	(149, 5, '2020-03-14'),
	(150, 5, '2020-03-29'),
	(151, 5, '2020-04-04'),
	(152, 5, '2020-04-30'),
	(153, 5, '2020-05-14'),
	(154, 5, '2020-05-24'),
	(155, 5, '2020-06-11'),
	(156, 5, '2020-06-19'),
	(157, 5, '2020-07-02'),
	(158, 5, '2020-07-07'),
	(159, 5, '2020-08-05'),
	(160, 5, '2020-08-14'),
	(161, 6, '2019-09-06'),
	(162, 6, '2019-09-25'),
	(163, 6, '2019-10-04'),
	(164, 6, '2019-10-06'),
	(165, 6, '2019-11-20'),
	(166, 6, '2019-11-26'),
	(167, 6, '2019-12-01'),
	(168, 6, '2019-12-12'),
	(169, 6, '2020-01-10'),
	(170, 6, '2020-01-18'),
	(171, 6, '2020-02-14'),
	(172, 6, '2020-02-29'),
	(173, 6, '2020-03-10'),
	(174, 6, '2020-03-11'),
	(175, 6, '2020-03-12'),
	(176, 6, '2020-03-13'),
	(177, 6, '2020-03-14'),
	(178, 6, '2020-04-04'),
	(179, 6, '2020-04-05'),
	(180, 6, '2020-04-06'),
	(181, 6, '2020-04-07'),
	(182, 6, '2020-04-08'),
	(183, 6, '2020-05-17'),
	(184, 6, '2020-05-18'),
	(185, 6, '2020-05-19'),
	(186, 6, '2020-05-20'),
	(187, 6, '2020-06-21'),
	(188, 6, '2020-06-26'),
	(189, 6, '2020-07-04'),
	(190, 6, '2020-07-16'),
	(191, 6, '2020-08-03'),
	(192, 6, '2020-08-08'),
	(193, 7, '2019-09-12'),
	(194, 7, '2019-09-30'),
	(195, 7, '2019-10-07'),
	(196, 7, '2019-10-17'),
	(197, 7, '2019-11-13'),
	(198, 7, '2019-11-18'),
	(199, 7, '2019-12-04'),
	(200, 7, '2019-12-30'),
	(201, 7, '2020-01-02'),
	(202, 7, '2020-01-27'),
	(203, 7, '2020-02-11'),
	(204, 7, '2020-02-20'),
	(205, 7, '2020-03-03'),
	(206, 7, '2020-03-04'),
	(207, 7, '2020-03-05'),
	(208, 7, '2020-03-06'),
	(209, 7, '2020-03-07'),
	(210, 7, '2020-04-25'),
	(211, 7, '2020-04-26'),
	(212, 7, '2020-04-27'),
	(213, 7, '2020-04-28'),
	(214, 7, '2020-04-29'),
	(215, 7, '2020-05-08'),
	(216, 7, '2020-05-09'),
	(217, 7, '2020-05-10'),
	(218, 7, '2020-05-11'),
	(219, 7, '2020-06-22'),
	(220, 7, '2020-06-24'),
	(221, 7, '2020-07-05'),
	(222, 7, '2020-07-15'),
	(223, 7, '2020-08-23'),
	(224, 7, '2020-08-29'),
	(225, 8, '2019-09-18'),
	(226, 8, '2019-09-24'),
	(227, 8, '2019-10-03'),
	(228, 8, '2019-10-09'),
	(229, 8, '2019-11-08'),
	(230, 8, '2019-11-22'),
	(231, 8, '2019-12-08'),
	(232, 8, '2019-12-24'),
	(233, 8, '2020-01-12'),
	(234, 8, '2020-01-23'),
	(235, 8, '2020-02-05'),
	(236, 8, '2020-02-21'),
	(237, 8, '2020-03-23'),
	(238, 8, '2020-03-24'),
	(239, 8, '2020-03-25'),
	(240, 8, '2020-03-26'),
	(241, 8, '2020-03-27'),
	(242, 8, '2020-04-02'),
	(243, 8, '2020-04-03'),
	(244, 8, '2020-04-04'),
	(245, 8, '2020-04-05'),
	(246, 8, '2020-04-06'),
	(247, 8, '2020-05-12'),
	(248, 8, '2020-05-13'),
	(249, 8, '2020-05-14'),
	(250, 8, '2020-05-15'),
	(251, 8, '2020-06-14'),
	(252, 8, '2020-06-29'),
	(253, 8, '2020-07-06'),
	(254, 8, '2020-07-18'),
	(255, 8, '2020-08-20'),
	(256, 8, '2020-08-26'),
	(257, 9, '2019-09-21'),
	(258, 9, '2019-09-27'),
	(259, 9, '2019-10-05'),
	(260, 9, '2019-10-11'),
	(261, 9, '2019-11-04'),
	(262, 9, '2019-11-16'),
	(263, 9, '2019-12-04'),
	(264, 9, '2019-12-13'),
	(265, 9, '2020-01-10'),
	(266, 9, '2020-01-28'),
	(267, 9, '2020-02-08'),
	(268, 9, '2020-02-25'),
	(269, 9, '2020-03-07'),
	(270, 9, '2020-03-18'),
	(271, 9, '2020-04-17'),
	(272, 9, '2020-04-24'),
	(273, 9, '2020-05-14'),
	(274, 9, '2020-05-19'),
	(275, 9, '2020-06-12'),
	(276, 9, '2020-06-13'),
	(277, 9, '2020-06-14'),
	(278, 9, '2020-06-15'),
	(279, 9, '2020-06-16'),
	(280, 9, '2020-07-20'),
	(281, 9, '2020-07-21'),
	(282, 9, '2020-07-22'),
	(283, 9, '2020-07-23'),
	(284, 9, '2020-07-24'),
	(285, 9, '2020-08-08'),
	(286, 9, '2020-08-09'),
	(287, 9, '2020-08-10'),
	(288, 9, '2020-08-11'),
	(289, 10, '2019-09-15'),
	(290, 10, '2019-09-18'),
	(291, 10, '2019-10-01'),
	(292, 10, '2019-10-19'),
	(293, 10, '2019-11-06'),
	(294, 10, '2019-11-18'),
	(295, 10, '2019-12-02'),
	(296, 10, '2019-12-23'),
	(297, 10, '2020-01-14'),
	(298, 10, '2020-01-25'),
	(299, 10, '2020-02-18'),
	(300, 10, '2020-02-21'),
	(301, 10, '2020-03-05'),
	(302, 10, '2020-03-13'),
	(303, 10, '2020-04-12'),
	(304, 10, '2020-04-19'),
	(305, 10, '2020-05-10'),
	(306, 10, '2020-05-21'),
	(307, 10, '2020-06-01'),
	(308, 10, '2020-06-02'),
	(309, 10, '2020-06-03'),
	(310, 10, '2020-06-04'),
	(311, 10, '2020-06-05'),
	(312, 10, '2020-07-08'),
	(313, 10, '2020-07-09'),
	(314, 10, '2020-07-10'),
	(315, 10, '2020-07-11'),
	(316, 10, '2020-07-12'),
	(317, 10, '2020-08-15'),
	(318, 10, '2020-08-16'),
	(319, 10, '2020-08-17'),
	(320, 10, '2020-08-18'),
	(321, 11, '2019-09-05'),
	(322, 11, '2019-09-22'),
	(323, 11, '2019-10-13'),
	(324, 11, '2019-10-21'),
	(325, 11, '2019-11-22'),
	(326, 11, '2019-11-28'),
	(327, 11, '2019-12-04'),
	(328, 11, '2019-12-13'),
	(329, 11, '2020-01-04'),
	(330, 11, '2020-01-16'),
	(331, 11, '2020-02-03'),
	(332, 11, '2020-02-24'),
	(333, 11, '2020-03-06'),
	(334, 11, '2020-03-14'),
	(335, 11, '2020-04-13'),
	(336, 11, '2020-04-20'),
	(337, 11, '2020-05-21'),
	(338, 11, '2020-05-25'),
	(339, 11, '2020-06-12'),
	(340, 11, '2020-06-13'),
	(341, 11, '2020-06-14'),
	(342, 11, '2020-06-15'),
	(343, 11, '2020-06-16'),
	(344, 11, '2020-07-02'),
	(345, 11, '2020-07-03'),
	(346, 11, '2020-07-04'),
	(347, 11, '2020-07-05'),
	(348, 11, '2020-07-06'),
	(349, 11, '2020-08-13'),
	(350, 11, '2020-08-14'),
	(351, 11, '2020-08-15'),
	(352, 11, '2020-08-16');
/*!40000 ALTER TABLE `ferie` ENABLE KEYS */;

-- Dump della struttura di tabella turni_infermieri.infermiere
CREATE TABLE IF NOT EXISTS `infermiere` (
  `id_infermiere` int(11) NOT NULL AUTO_INCREMENT,
  `nome` varchar(50) COLLATE utf8_bin NOT NULL,
  `cognome` varchar(50) COLLATE utf8_bin NOT NULL,
  `data_nascita` date NOT NULL,
  `trimestre_ferie_lunghe` int(11) DEFAULT NULL,
  PRIMARY KEY (`id_infermiere`)
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='anagrafica degli infermieri';

-- Dump dei dati della tabella turni_infermieri.infermiere: ~11 rows (circa)
DELETE FROM `infermiere`;
/*!40000 ALTER TABLE `infermiere` DISABLE KEYS */;
INSERT INTO `infermiere` (`id_infermiere`, `nome`, `cognome`, `data_nascita`, `trimestre_ferie_lunghe`) VALUES
	(1, 'Mario', 'Rossi', '1990-07-24', 1),
	(2, 'Martina', 'Saro', '1975-02-19', 1),
	(3, 'Giovanni', 'Allegro', '1982-11-05', 1),
	(4, 'Luca', 'Marrone', '1992-11-25', 2),
	(5, 'Paola', 'Montalba', '1994-02-04', 2),
	(6, 'Cristina', 'Pace', '1989-03-06', 3),
	(7, 'Sebastiano', 'Salienti', '1995-12-12', 3),
	(8, 'Laura', 'Bartoli', '1983-01-30', 3),
	(9, 'Benedetta', 'Sacco', '1971-05-15', 4),
	(10, 'Daniele', 'Giacorra', '1966-08-20', 4),
	(11, 'Stefania', 'Allecco', '1988-10-01', 4);
/*!40000 ALTER TABLE `infermiere` ENABLE KEYS */;

-- Dump della struttura di tabella turni_infermieri.orario
CREATE TABLE IF NOT EXISTS `orario` (
  `id_orario` int(11) NOT NULL AUTO_INCREMENT,
  `id_infermiere` int(11) NOT NULL,
  `data` date NOT NULL,
  `turno` char(1) COLLATE utf8_bin NOT NULL,
  PRIMARY KEY (`id_orario`),
  UNIQUE KEY `id_infermiere_data` (`id_infermiere`,`data`),
  KEY `FK_orario_infermiere` (`id_infermiere`),
  CONSTRAINT `FK_orario_infermiere` FOREIGN KEY (`id_infermiere`) REFERENCES `infermiere` (`id_infermiere`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='viene indicato il turno che ogni infermiere dovrà fare nei diversi giorni';

-- Dump dei dati della tabella turni_infermieri.orario: ~0 rows (circa)
DELETE FROM `orario`;
/*!40000 ALTER TABLE `orario` DISABLE KEYS */;
/*!40000 ALTER TABLE `orario` ENABLE KEYS */;

-- Dump della struttura di tabella turni_infermieri.statistiche
CREATE TABLE IF NOT EXISTS `statistiche` (
  `id_statistiche` int(11) NOT NULL AUTO_INCREMENT,
  `id_infermiere` int(11) NOT NULL,
  `turno_mattino` int(11) NOT NULL,
  `turno_pomeriggio` int(11) NOT NULL,
  `turno_notte` int(11) NOT NULL,
  `riposi` int(11) NOT NULL,
  `ore_lavorative_totali` int(11) NOT NULL,
  `diff_teorico_effettivo` int(11) NOT NULL,
  `giorni_ferie` int(11) NOT NULL,
  `giorni_ferie_richiesti` int(11) NOT NULL,
  PRIMARY KEY (`id_statistiche`),
  KEY `FK_statistiche_infermiere` (`id_infermiere`),
  CONSTRAINT `FK_statistiche_infermiere` FOREIGN KEY (`id_infermiere`) REFERENCES `infermiere` (`id_infermiere`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='per ogni infermiere vengono riportate delle statistiche riguardo i turni lavorativi ';

-- Dump dei dati della tabella turni_infermieri.statistiche: ~0 rows (circa)
DELETE FROM `statistiche`;
/*!40000 ALTER TABLE `statistiche` DISABLE KEYS */;
/*!40000 ALTER TABLE `statistiche` ENABLE KEYS */;

-- Dump della struttura di tabella turni_infermieri.vincoli
CREATE TABLE IF NOT EXISTS `vincoli` (
  `id_vincolo` int(11) NOT NULL AUTO_INCREMENT,
  `nome` varchar(50) COLLATE utf8_bin NOT NULL,
  `valore` int(11) NOT NULL,
  `unita` varchar(50) COLLATE utf8_bin NOT NULL,
  PRIMARY KEY (`id_vincolo`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='insieme di tutti i vincoli necessari per verificare che l''orario generato sia accettabile';

-- Dump dei dati della tabella turni_infermieri.vincoli: ~8 rows (circa)
DELETE FROM `vincoli`;
/*!40000 ALTER TABLE `vincoli` DISABLE KEYS */;
INSERT INTO `vincoli` (`id_vincolo`, `nome`, `valore`, `unita`) VALUES
	(1, 'ferie_annue', 32, 'giorni'),
	(2, 'ore_lavorative_settimanali_contrattuali', 36, 'ore'),
	(3, 'max_ore_lavorative_settimanali', 48, 'ore'),
	(4, 'max_giorni_lavorativi_consecutivi', 6, 'giorni'),
	(5, 'min_ore_riposo_consecutive', 11, 'ore'),
	(6, 'min_giorni_riposo_settimanali', 1, 'giorni'),
	(7, 'debito_orario_teorico_annuale', 1872, 'ore'),
	(8, 'durata_turno_lavorativo', 8, 'ore');
/*!40000 ALTER TABLE `vincoli` ENABLE KEYS */;

/*!40101 SET SQL_MODE=IFNULL(@OLD_SQL_MODE, '') */;
/*!40014 SET FOREIGN_KEY_CHECKS=IF(@OLD_FOREIGN_KEY_CHECKS IS NULL, 1, @OLD_FOREIGN_KEY_CHECKS) */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
